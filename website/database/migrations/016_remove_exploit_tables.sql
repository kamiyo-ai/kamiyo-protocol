-- Migration: Remove exploit intelligence tables
-- Date: 2025-01-13
-- Description: Drop all tables related to exploit intelligence aggregation
--              as platform pivots to x402 payment infrastructure focus

-- Drop views first (depend on tables)
DROP VIEW IF EXISTS v_recent_exploits CASCADE;
DROP VIEW IF EXISTS v_stats_24h CASCADE;
DROP VIEW IF EXISTS v_source_health CASCADE;

-- Drop exploit intelligence tables
DROP TABLE IF EXISTS community_submissions CASCADE;
DROP TABLE IF EXISTS user_reputation CASCADE;
DROP TABLE IF EXISTS alerts_sent CASCADE;
DROP TABLE IF EXISTS exploits CASCADE;
DROP TABLE IF EXISTS sources CASCADE;

-- Drop Prisma webhook/watchlist tables (removed from schema)
DROP TABLE IF EXISTS "Webhook" CASCADE;
DROP TABLE IF EXISTS "Watchlist" CASCADE;

-- Note: Keeping x402 tables, user tables, and subscription tables
-- These remain active for x402 payment infrastructure
