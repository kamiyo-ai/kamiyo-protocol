# Deep Dive Analysis with Claude AI

## What You Get

Every exploit **>= $1M** automatically receives:

### ðŸ“Š Multi-Source Data Aggregation
- Transaction data from blockchain explorers
- Historical context from your 17+ aggregated sources
- Timeline reconstruction from on-chain data
- Loss calculations and recovery status

### ðŸ¤– Claude AI Enhancement
Uses Anthropic's Claude 3.5 Sonnet to:
- Transform raw data into engaging narratives
- Create professional Twitter threads (6+ tweets)
- Generate Discord deep dives with context
- Add key insights and engagement hooks

### ðŸ“ˆ Visual Content (Generated by Report System)
- Timeline visualizations
- Loss amount comparisons
- Historical context charts
- Branded Kamiyo graphics

## How It Works

### 1. Exploit Detection
```
Watcher polls API every 60s â†’ Finds $3M exploit â†’ Triggers deep dive
```

### 2. Data Aggregation
```python
# Gathers data from multiple sources
- Blockchain transaction data
- Historical exploits in same category
- Protocol information
- Recovery status updates
```

### 3. Claude AI Analysis
```python
# ClaudeEnhancer generates:
- Executive summary (conversational, engaging)
- Key insights that drive engagement
- Professional Twitter thread structure
- Discord formatted deep dive
```

### 4. Platform-Specific Formatting

**Twitter Thread Example (6 tweets):**
```
Tweet 1: ðŸš¨ EXPLOIT ALERT: GriffinAI
         Loss: $3.0M
         Chain: BSC
         Type: False Peer Exploit

         Analysis thread below ðŸ‘‡

Tweet 2: [Executive Summary by Claude]
         "On Sept 24, 2025, GriffinAI suffered a sophisticated
         false peer exploit that drained $3M from their BSC
         contracts..."

Tweet 3: Key Insight:
         [Engagement hook from Claude]

Tweet 4: Timeline:
         Occurred: 14:23 UTC
         Detected: 14:31 UTC
         Detection speed: 8 minutes

Tweet 5: Historical Context:
         Total losses in False Peer exploits: $45.2M this quarter

Tweet 6: Source: DeFiLlama
         Real-time blockchain exploit intelligence from 20+ verified sources.
         Follow @KamiyoAI for more blockchain exploit analysis.
         kamiyo.ai
```

**Discord Deep Dive:**
```markdown
**EXPLOIT ALERT: GriffinAI**

**Loss:** $3,000,000.00
**Chain:** BSC
**Type:** False Peer Exploit

**Analysis:**
[Claude-enhanced executive summary with context and insights]

**Key Insight:**
[Most engaging finding from analysis]

**Timeline:**
- Occurred: 14:23 UTC
- Detected: 14:31 UTC
- Detection speed: 8 minutes

**Source:** DeFiLlama
Real-time blockchain exploit intelligence from 20+ verified sources.
https://kamiyo.ai
```

## Configuration

### Environment Variables

```bash
# Posting threshold ($1M minimum)
SOCIAL_MIN_AMOUNT_USD=1000000

# Deep dive threshold (same as posting = all posts get deep dive)
DEEP_DIVE_THRESHOLD_USD=1000000

# Claude AI API key (required for enhanced analysis)
ANTHROPIC_API_KEY=sk-ant-...

# Optional: Adjust polling
POLL_INTERVAL_SECONDS=60
MAX_POSTS_PER_CYCLE=3
```

### In Render Dashboard

1. Go to `kamiyo-social-watcher` service
2. Add environment variable:
   - **Key**: `ANTHROPIC_API_KEY`
   - **Value**: Your Anthropic API key from https://console.anthropic.com/

Get your API key: https://console.anthropic.com/settings/keys

## What Makes This POWERFUL

### 1. Speed + Quality
- Detects exploits in **< 5 minutes** (aggregation from 17+ sources)
- Generates professional analysis in **< 30 seconds** (Claude AI)
- Posts to all platforms in **< 10 seconds**
- **Total time: < 1 minute from exploit to published thread**

### 2. Engagement Optimization
Claude AI specifically trained to:
- Create curiosity gaps ("What happened next will shock you...")
- Add human context ("This is the 3rd largest BSC exploit this quarter")
- Use conversational tone (not robotic)
- Include calls to action

### 3. Multi-Platform Native
- Twitter: 6-tweet threads optimized for retweets
- Discord: Formatted with markdown, no emojis
- Reddit: Long-form with full context
- Each platform gets **custom-formatted content**

## Architecture

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Kamiyo Watcher                           â”‚
â”‚                  (polls every 60s)                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â”‚ New exploit >= $1M detected
                         â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚              Autonomous Growth Engine                        â”‚
â”‚                                                              â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  1. ReportGenerator                                  â”‚   â”‚
â”‚  â”‚     - Aggregate data from 17+ sources               â”‚   â”‚
â”‚  â”‚     - Build timeline from blockchain                â”‚   â”‚
â”‚  â”‚     - Calculate loss amounts                        â”‚   â”‚
â”‚  â”‚     - Add historical context                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                    â”‚
â”‚                         â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  2. ClaudeEnhancer (if ANTHROPIC_API_KEY set)       â”‚   â”‚
â”‚  â”‚     - Transform data into narrative                 â”‚   â”‚
â”‚  â”‚     - Create engagement hooks                       â”‚   â”‚
â”‚  â”‚     - Generate Twitter threads                      â”‚   â”‚
â”‚  â”‚     - Format Discord deep dives                     â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                         â”‚                                    â”‚
â”‚                         â–¼                                    â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚  3. Platform Posters                                â”‚   â”‚
â”‚  â”‚     - XTwitterPoster (threads)                      â”‚   â”‚
â”‚  â”‚     - DiscordPoster (webhooks)                      â”‚   â”‚
â”‚  â”‚     - RedditPoster (if enabled)                     â”‚   â”‚
â”‚  â”‚     - TelegramPoster (if enabled)                   â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
                         â–¼
              ðŸ“± Published across all platforms
```

## Example Output

**Input (from database):**
```json
{
  "protocol": "GriffinAI",
  "chain": "BSC",
  "loss_amount_usd": 3000000,
  "exploit_type": "False Peer Exploit",
  "timestamp": "2025-09-24T14:23:00Z",
  "source": "DeFiLlama"
}
```

**Output (Claude-enhanced Twitter thread):**
```
ðŸš¨ EXPLOIT ALERT: GriffinAI

Loss: $3,000,000.00
Chain: BSC
Type: False Peer Exploit

Analysis thread below ðŸ‘‡

---

On September 24, GriffinAI became the latest victim of a sophisticated
false peer exploit on BSC. The attacker manipulated network connections
to trick the protocol into accepting malicious transaction data, draining
$3M in under 8 minutes.

---

Key Insight:

False peer exploits have become increasingly common on BSC, with attackers
exploiting the network's fast block times to execute rapid drains before
detection systems can respond.

---

Timeline:

Occurred: 14:23 UTC
Detected: 14:31 UTC
Detection speed: 8 minutes

The rapid detection was thanks to multiple monitoring systems flagging
unusual transaction patterns.

---

Historical Context:

Total losses in False Peer exploits: $45.2M this quarter

GriffinAI is the 4th major BSC project hit by this attack vector in Q3 2025.

---

Source: DeFiLlama

Real-time blockchain exploit intelligence from 20+ verified sources.
Follow @KamiyoAI for more blockchain exploit analysis.

kamiyo.ai
```

## Monitoring

Watch the logs in Render dashboard:

```
INFO - Initializing Autonomous Growth Engine with Claude AI deep dive analysis...
INFO - Starting Kamiyo watcher (polling every 60s)
INFO - Fetched 3 recent exploits from Kamiyo API
INFO - New exploit detected: GriffinAI ($3.0M) on BSC
INFO - Major exploit detected ($3,000,000) - generating deep dive thread
INFO - Generating exploit analysis report
INFO - Analysis report generated (report_id: abc123)
INFO - Enhanced summary with Claude for GriffinAI
INFO - Generated 6-tweet thread with Claude
INFO - Publishing to social media platforms
INFO - Successfully posted exploit 1/3: GriffinAI to 1 platforms
```

## Costs

**Claude AI API Costs:**
- Average tokens per deep dive: ~5,000 tokens
- Cost: ~$0.015 per deep dive (Claude 3.5 Sonnet)
- If 3 exploits >= $1M per day: **~$1.35/month**

**Very affordable** for the quality and engagement you get!

## Troubleshooting

### "Claude enhancement disabled" in logs
- **Cause**: No `ANTHROPIC_API_KEY` set
- **Fix**: Add API key in Render dashboard
- **Fallback**: System uses template-based threads (still good, but less engaging)

### Threads not appearing on Twitter
- **Cause**: Missing X API credentials
- **Fix**: Verify `X_API_KEY`, `X_API_SECRET`, etc. in Render dashboard
- **Check**: Look for "Successfully posted" in logs

### Deep dive only sometimes
- **Cause**: `DEEP_DIVE_THRESHOLD_USD` too high
- **Current**: Should be `1000000` ($1M) - same as posting threshold
- **Fix**: Verify in render.yaml or Render dashboard

## Benefits

âœ… **Speed**: First to post detailed analysis (< 1 minute)
âœ… **Quality**: Claude AI makes content engaging and professional
âœ… **Consistency**: Every $1M+ exploit gets same high-quality treatment
âœ… **Scalability**: Fully automated, no manual work needed
âœ… **Multi-platform**: Twitter, Discord, Reddit, Telegram (configurable)
âœ… **Cost-effective**: ~$1-2/month for Claude API

## Next Steps

1. **Add ANTHROPIC_API_KEY** to Render dashboard (required)
2. **Monitor logs** to see deep dives being generated
3. **Check Twitter** for published threads
4. **Adjust thresholds** if needed (currently $1M minimum)

That's it! Your system now generates professional, Claude AI-enhanced deep dive analysis for every significant exploit. ðŸš€
