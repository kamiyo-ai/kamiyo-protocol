# ============================================================================
# KAMIYO Hyperliquid Security Monitoring - Environment Configuration
# ============================================================================
# Copy this file to .env and configure for your environment
# DO NOT commit .env to version control!

# ============================================================================
# Database Configuration
# ============================================================================

# PostgreSQL connection URL
# Format: postgresql://username:password@host:port/database
DATABASE_URL=postgresql://kamiyo:kamiyo_secure_password@localhost:5432/kamiyo_hyperliquid

# Database connection pool settings
DATABASE_POOL_SIZE=5
DATABASE_MAX_OVERFLOW=10
DATABASE_POOL_TIMEOUT=30
DATABASE_POOL_RECYCLE=3600

# Enable SQL query logging (for development only)
DATABASE_ECHO=false

# ============================================================================
# API Server Configuration
# ============================================================================

# Server host and port
API_HOST=0.0.0.0
API_PORT=8000

# API rate limiting (requests per time period)
# Examples: "60/minute", "1000/hour", "10000/day"
RATE_LIMIT=60/minute

# ============================================================================
# CORS (Cross-Origin Resource Sharing) Configuration
# ============================================================================

# Allowed origins for CORS (comma-separated)
# Use "*" for development only! In production, specify exact domains
# Example: "https://kamiyo.io,https://app.kamiyo.io,https://dashboard.kamiyo.io"
ALLOWED_ORIGINS=*

# ============================================================================
# Security Monitoring Thresholds
# ============================================================================

# HLP Vault Thresholds
CRITICAL_LOSS_24H=2000000           # $2M critical threshold
HIGH_LOSS_24H=1000000               # $1M high threshold
DRAWDOWN_CRITICAL_PCT=10.0          # 10% drawdown alert
SIGMA_THRESHOLD=3.0                 # Statistical anomaly threshold

# Oracle Deviation Thresholds
ORACLE_CRITICAL_DEVIATION=1.0       # 1.0% critical
ORACLE_WARNING_DEVIATION=0.5        # 0.5% warning
ORACLE_DANGER_DEVIATION=0.5         # 0.5% danger
SUSTAINED_DEVIATION_SEC=30          # Sustained duration threshold

# Liquidation Analysis Thresholds
FLASH_LOAN_THRESHOLD=500000         # $500k flash loan detection
FLASH_LOAN_WINDOW_SEC=10            # 10 second window
CASCADE_COUNT=5                     # 5 liquidations = cascade
CASCADE_WINDOW_SEC=300              # 5 minute cascade window

# ============================================================================
# Hyperliquid API Configuration
# ============================================================================

# Use testnet or mainnet
HYPERLIQUID_USE_TESTNET=false

# HLP Vault address to monitor
HLP_VAULT_ADDRESS=0xdfc24b077bc1425ad1dea75bcb6f8158e10df303

# Monitored addresses for liquidation tracking (comma-separated)
# Leave empty to disable address-specific monitoring
MONITORED_ADDRESSES=

# API request timeout (seconds)
HYPERLIQUID_TIMEOUT=30

# ============================================================================
# External Price Oracle Configuration
# ============================================================================

# Binance API
BINANCE_API_URL=https://api.binance.com/api/v3

# Coinbase API
COINBASE_API_URL=https://api.coinbase.com/v2

# Price check interval (seconds)
PRICE_CHECK_INTERVAL=60

# ============================================================================
# Caching Configuration
# ============================================================================

# Cache TTL for exploit data (seconds)
EXPLOIT_CACHE_TTL=300               # 5 minutes

# Redis configuration (optional, for production)
# If not set, uses in-memory caching
# REDIS_URL=redis://localhost:6379/0
# REDIS_PASSWORD=
# REDIS_DB=0

# ============================================================================
# Alert/Notification Configuration
# ============================================================================

# Enable alert notifications
ALERTS_ENABLED=true

# Minimum severity level for alerts (info, warning, error, critical)
ALERT_MIN_SEVERITY=high

# Webhook URL for critical alerts (optional)
WEBHOOK_URL=

# Telegram Bot Configuration (optional)
# Get bot token from @BotFather on Telegram
# Get chat ID by messaging your bot and visiting: https://api.telegram.org/bot<YOUR_TOKEN>/getUpdates
TELEGRAM_BOT_TOKEN=
TELEGRAM_CHAT_ID=

# Discord Webhook Configuration (optional)
# Create webhook in Discord Server Settings > Integrations > Webhooks
DISCORD_WEBHOOK_URL=

# Slack Webhook Configuration (optional)
# SLACK_WEBHOOK_URL=https://hooks.slack.com/services/your/webhook/url

# Email Configuration (optional)
# SMTP_HOST=smtp.gmail.com
# SMTP_PORT=587
# SMTP_USERNAME=your_email@gmail.com
# SMTP_PASSWORD=your_app_password
# SMTP_FROM=alerts@kamiyo.ai
# SMTP_TO=security-team@yourcompany.com

# Alert severity threshold (only send alerts >= this level)
# Options: critical, high, medium, low, info
ALERT_MIN_SEVERITY=high

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format
# Options: json, text
LOG_FORMAT=text

# Log file path (optional, logs to stdout if not set)
# LOG_FILE=/var/log/kamiyo/hyperliquid.log

# Enable structured logging with JSON output
STRUCTURED_LOGGING=false

# ============================================================================
# Monitoring & Observability
# ============================================================================

# Prometheus metrics endpoint
METRICS_ENABLED=true
METRICS_PORT=9090

# Sentry error tracking (optional)
# SENTRY_DSN=https://your_sentry_dsn_here

# Application environment
# Options: development, staging, production
ENVIRONMENT=development

# ============================================================================
# Authentication & Authorization
# ============================================================================

# Enable API key authentication (default: false - all endpoints are public)
# Set to true for production deployments to require API keys
API_KEY_ENABLED=false

# API Keys (comma-separated list of valid API keys)
# Generate new keys using: python api/auth.py
# Example: API_KEYS="key1_abc123xyz789,key2_def456uvw012,key3_ghi789rst345"
API_KEYS=

# Optional salt for API key hashing (change for extra security)
API_KEY_HASH_SALT=kamiyo-hyperliquid-salt

# JWT secret for session management (for future use)
# JWT_SECRET=your_very_secret_key_change_in_production
# JWT_ALGORITHM=HS256
# JWT_EXPIRATION_HOURS=24

# ============================================================================
# Performance & Scaling
# ============================================================================

# Number of worker processes (for production deployment)
WORKERS=4

# Worker timeout (seconds)
WORKER_TIMEOUT=60

# Enable async mode for aggregators
ASYNC_AGGREGATORS=true

# Maximum concurrent API requests
MAX_CONCURRENT_REQUESTS=10

# ============================================================================
# Development & Testing
# ============================================================================

# Enable debug mode (DO NOT use in production!)
DEBUG=false

# Enable API documentation (Swagger UI)
ENABLE_DOCS=true

# Enable CORS for local development
DEV_MODE=false

# Reload server on code changes
AUTO_RELOAD=false

# ============================================================================
# Data Retention
# ============================================================================

# How long to keep historical data (days)
DATA_RETENTION_DAYS=90

# Auto-cleanup old data
AUTO_CLEANUP_ENABLED=true

# Cleanup interval (hours)
CLEANUP_INTERVAL_HOURS=24

# ============================================================================
# External Integrations
# ============================================================================

# CoinGlass API (for liquidation data)
# COINGLASS_API_KEY=your_api_key_here
# COINGLASS_API_URL=https://open-api.coinglass.com/public/v2

# DefiLlama API (for TVL data)
# DEFILLAMA_API_URL=https://api.llama.fi

# ============================================================================
# Advanced Configuration
# ============================================================================

# Custom user agent for API requests
USER_AGENT=KAMIYO Exploit Aggregator/2.0

# Request retry configuration
REQUEST_MAX_RETRIES=3
REQUEST_RETRY_DELAY=2

# WebSocket configuration (for real-time monitoring)
WEBSOCKET_ENABLED=true
WEBSOCKET_URL=wss://api.hyperliquid.xyz/ws
WEBSOCKET_AUTO_RECONNECT=true

# ============================================================================
# License & Commercial Configuration
# ============================================================================

# License key (for commercial deployments)
# LICENSE_KEY=your_license_key_here

# Organization name
# ORGANIZATION_NAME=Your Company Name

# Deployment ID (for tracking)
# DEPLOYMENT_ID=prod-001
